<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
</head>
<body>
    <input type="text" id="textbox" onkeypress="onType()"/>
    <button onclick="addTodo()">Add Todo</button>
    <button onclick="clearTodos()">Clear Todos</button>
    <ul id="todo-container">
    </ul>

    <script>

        let todos = [ { id: 0, text: "Do Laundry"}, { id: 1, text: "Make Sandwich" } ]
        let nextId = 0; // easy way to make new ids

        const container = document.getElementById("todo-container")
        const textbox = document.getElementById("textbox")

        window.addEventListener("load", () => {
            renderAllTodos()
        })

        /*** RENDERING ***/

        function renderAllTodos() {
            while(container.hasChildNodes()) {
                container.removeChild(container.lastChild)
            }

            for(const todo of todos) {
                renderTodo(todo)
            }
        }

        function renderTodo(todo) {
            // code makes an li
            const newLi = document.createElement("li")

            // sets up the li with the right text and such
            newLi.textContent = todo.text
            newLi.addEventListener("click", () => deleteTodo(todo.id))
            newLi.id = "todo-" + todo.id

            // puts the li in the ul
            container.appendChild(newLi)
        }

        /*** EVENT LISTENERS ***/

        function addTodo() {
            // also add it to our data
            const newTodo = { 
                id: nextId++, // little hack
                text: textbox.value 
            }
            todos.push(newTodo)

            renderAllTodos()
            textbox.value = ""
        }

        function deleteTodo(idOfTaskToDelete) {
            // make change to data as well
            const indexToDelete = todos.findIndex(t => t.id === idOfTaskToDelete)
            todos.splice(indexToDelete, 1)

            renderAllTodos()
        }

        function updateTodo(idOfTodoToUpdate, newText) {

            const updatedTodo = { text: newText, id: idOfTodoToUpdate }
            // OVERWRITE TODO HERE TO UPDATE TODO

            renderAllTodos()
        }

        function clearTodos() {
            // make change to data as well
            todos = []

            renderAllTodos()
        }

        function onType() {
            if(event.keyCode === 13) { // the enter key
                addTodo()
            }
        }
    </script>
</body>
</html>

